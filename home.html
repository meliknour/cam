<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>الصفحة الرئيسية</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
      margin:0; padding:0;
      background:#f0f2f5; color:#333;
    }
    body.dark {
      background:#18191a; color:#e4e6eb;
    }

    /* Navbar */
    .navbar {
      display:flex; justify-content:space-between; align-items:center;
      background:#3a3b57; color:#fff; padding:10px 20px;
      position:fixed; top:0; left:0; right:0; z-index:1000;
    }
    .navbar .logo { font-size:18px; font-weight:bold; }
    .navbar .nav-icons {
      display:flex; gap:20px;
    }
    .navbar .nav-icons a {
      color:#fff; text-decoration:none; font-size:20px;
    }
    .content {
      margin-top:70px; padding:20px;
      text-align:center;
    }
    .welcome {
      font-size:22px; font-weight:bold; margin-bottom:20px;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <div class="logo">موقعي</div>
    <div class="nav-icons">
      <a href="home.html" title="الرئيسية"><i class="fas fa-home"></i></a>
      <a href="#" title="الإشعارات"><i class="fas fa-bell"></i></a>
      <a href="#" title="الرسائل"><i class="fas fa-envelope"></i></a>
      <a href="#" title="المعارض"><i class="fas fa-images"></i></a>
      <a href="settings.html" title="الإعدادات"><i class="fas fa-cog"></i></a>
    </div>
  </div>

  <div class="content">
    <div class="welcome">أهلًا، <span id="userName">...</span> 👋</div>
    <p>هذه الصفحة الرئيسية الخاصة بك.</p>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBq45NTkOCdirrGjwPqv_kUJ7tibyThJww",
      authDomain: "soft-ff1e8.firebaseapp.com",
      projectId: "soft-ff1e8",
      storageBucket: "soft-ff1e8.appspot.com",
      messagingSenderId: "17443109810",
      appId: "1:17443109810:web:c72598153a7b82ba3042ab"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const userName = document.getElementById("userName");

    onAuthStateChanged(auth, async (user) => {
      if (user) {
        const userDoc = await getDoc(doc(db, "users", user.uid));
        if (userDoc.exists()) {
          const data = userDoc.data();
          userName.textContent = data.name || user.email;
          if (data.darkMode) {
            document.body.classList.add("dark");
          }
        } else {
          userName.textContent = user.email;
        }
      } else {
        window.location.href = "index.html"; // لو مش مسجل يدخل صفحة تسجيل الدخول
      }
    });
  </script>
</body>
</html>
