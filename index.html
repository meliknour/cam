<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>البحث التلقائي</title>
</head>
<body>
  <h3>🔍 البحث عن اللجنة</h3>
  <h4 id="result">جاري البحث...</h4>

  <script>
    // رابط Google Sheets (ثابت هنا)
    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTQqR_h8x3sFfLJCcOUpV4bvWJYTceaXW1DWedcvBGRocmFU81AcMlYJ4lb6CTY4T4pHpM7gf3ZbdWP/pub?gid=0&single=true&output=csv";

    // نأخذ الكود من الرابط (بعد ?)
    const query = window.location.search.substring(1); 
    const resultDiv = document.getElementById("result");

    async function searchData() {
      if (!query) {
        resultDiv.textContent = "❌ لم يتم إدخال كود في الرابط";
        return;
      }

      try {
        const response = await fetch(sheetUrl);
        const data = await response.text();
        const rows = data.split("\n").map(r => r.split(","));

        let found = false;
        rows.forEach(row => {
          if (row.includes(query)) {
            resultDiv.textContent = "✅ تم العثور: " + row.join(" | ");
            found = true;
          }
        });

        if (!found) {
          resultDiv.textContent = "❌ لم يتم العثور على " + query;
        }
      } catch (error) {
        resultDiv.textContent = "🚨 خطأ في جلب البيانات";
      }
    }

    searchData();
  </script>
</body>
</html>
