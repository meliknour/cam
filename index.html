<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</title>
</head>
<body>
  <h3>ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù„Ø¬Ù†Ø©</h3>
  <h4 id="result">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</h4>

  <script>
    // Ø±Ø§Ø¨Ø· Google Sheets (Ø«Ø§Ø¨Øª Ù‡Ù†Ø§)
    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTQqR_h8x3sFfLJCcOUpV4bvWJYTceaXW1DWedcvBGRocmFU81AcMlYJ4lb6CTY4T4pHpM7gf3ZbdWP/pub?gid=0&single=true&output=csv";

    // Ù†Ø£Ø®Ø° Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· (Ø¨Ø¹Ø¯ ?)
    const query = window.location.search.substring(1); 
    const resultDiv = document.getElementById("result");

    async function searchData() {
      if (!query) {
        resultDiv.textContent = "âŒ Ù„Ù… ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·";
        return;
      }

      try {
        const response = await fetch(sheetUrl);
        const data = await response.text();
        const rows = data.split("\n").map(r => r.split(","));

        let found = false;
        rows.forEach(row => {
          if (row.includes(query)) {
            resultDiv.textContent = "âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ±: " + row.join(" | ");
            found = true;
          }
        });

        if (!found) {
          resultDiv.textContent = "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ " + query;
        }
      } catch (error) {
        resultDiv.textContent = "ğŸš¨ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
      }
    }

    searchData();
  </script>
</body>
</html>
